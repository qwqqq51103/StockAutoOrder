# 🚀 TradingView 風格 K 線圖 - 快速啟動指南

## 📋 改進內容概覽

### ✅ 已完成的改進
1. **現代化配色**：青綠色上漲 + 珊瑚紅下跌
2. **OHLC 信息面板**：左上角實時顯示 K 線數據
3. **專業十字光標**：細線、半透明、精確定位
4. **優雅的網格**：淡色虛線，清晰不刺眼
5. **實時聯動**：鼠標移動時自動更新信息

---

## 🎯 如何查看改進效果

### 步驟 1：啟動程序
```bash
# 編譯（如需要）
javac -cp "lib/*:." StockMainAction/*.java

# 運行
java -cp "lib/*:." StockMainAction.StockMarketSimulation
```

### 步驟 2：觀察 K 線圖
1. 程序啟動後，主界面會顯示 K 線圖
2. **注意左上角**：會看到一個半透明的白色面板，顯示最新 K 線的 OHLC 數據

### 步驟 3：測試交互功能

#### 🖱️ 鼠標懸停測試
```
1. 將鼠標移動到 K 線圖上
2. 觀察：
   • 十字光標會自動出現（細灰線）
   • 左上角 OHLC 面板會更新，顯示鼠標位置的 K 線數據
   • 面板文字顏色會根據漲跌變化（綠色=漲，紅色=跌）
```

#### 📊 查看最新數據
```
1. 不移動鼠標，觀察左上角面板
2. 每當新的價格數據到來時，面板會自動更新
3. 顯示當前最新 K 線的完整信息
```

#### 🔍 查看歷史 K 線
```
1. 將鼠標移動到較早的 K 線上
2. OHLC 面板會立即切換顯示該 K 線的數據
3. 可以快速瀏覽歷史數據，無需點擊
```

---

## 🎨 視覺對比

### 改進前 ❌
```
• 傳統紅綠配色（紅漲綠跌）
• 無 OHLC 信息顯示
• 粗十字光標（較刺眼）
• 普通實線網格
• 需要點擊才能查看詳細數據
```

### 改進後 ✅
```
• 現代青綠/珊瑚紅配色
• 左上角 OHLC 面板（類似 TradingView）
• 細線半透明十字光標
• 淡色虛線網格
• 鼠標懸停即可查看詳細數據
```

---

## 📝 OHLC 面板說明

### 面板內容示例
```
┌────────────────────────────────────┐
│ 14:35:20  +2.35 (+0.45%)          │ ← 時間 + 漲跌額 + 漲跌幅
│ O: 520.00  H: 525.50              │ ← 開盤價、最高價
│ L: 518.00  C: 522.35              │ ← 最低價、收盤價
└────────────────────────────────────┘
```

### 面板說明
- **O** = Open（開盤價）
- **H** = High（最高價）
- **L** = Low（最低價）
- **C** = Close（收盤價）
- **綠色文字** = 上漲（收盤 ≥ 開盤）
- **紅色文字** = 下跌（收盤 < 開盤）

---

## 🎯 詳細功能測試

### 測試 1：實時更新
```
目的：驗證 OHLC 面板是否實時更新

步驟：
1. 啟動程序，觀察左上角 OHLC 面板
2. 等待新的交易發生
3. 觀察面板數值變化

預期結果：
• 面板中的收盤價(C)會隨著新交易更新
• 最高價(H)和最低價(L)可能也會更新
• 漲跌額和漲跌幅會實時計算並顯示
```

### 測試 2：鼠標聯動
```
目的：驗證鼠標懸停時的聯動效果

步驟：
1. 將鼠標移動到 K 線圖上
2. 緩慢移動鼠標，經過不同的 K 線
3. 觀察 OHLC 面板的變化

預期結果：
• 十字光標會跟隨鼠標移動
• OHLC 面板會立即更新為鼠標位置的 K 線數據
• 面板顏色會根據該 K 線的漲跌變化
```

### 測試 3：多週期支持
```
目的：驗證不同時間週期下的功能

步驟：
1. 切換不同的 K 線週期（10秒、30秒、1分、5分等）
2. 觀察 OHLC 面板的顯示

預期結果：
• 面板會顯示對應週期的 K 線數據
• 時間格式會相應調整
• 所有功能正常工作
```

### 測試 4：縮放和平移
```
目的：驗證縮放平移時的功能

步驟：
1. 使用滑鼠滾輪縮放圖表
2. 拖動圖表進行平移
3. 在不同縮放級別下移動鼠標

預期結果：
• OHLC 面板始終正常工作
• 十字光標精確對齊 K 線
• 數據顯示準確無誤
```

---

## 🎨 配色參考

### 主要顏色
```
上漲蠟燭：
  顏色代碼：#26a69a
  RGB：38, 166, 154
  說明：青綠色，現代感強

下跌蠟燭：
  顏色代碼：#ef5350
  RGB：239, 83, 80
  說明：珊瑚紅，對比明顯

網格線：
  顏色代碼：#F0F3FA
  RGB：240, 243, 250
  說明：淡藍灰色，不刺眼

十字光標：
  顏色代碼：rgba(100, 100, 100, 180)
  說明：半透明灰色，專業感
```

---

## 🐛 常見問題排查

### Q1: 看不到 OHLC 面板？
```
可能原因：
1. 面板可能被其他組件遮擋
2. K 線數據尚未加載

解決方案：
1. 確保程序已啟動並開始交易
2. 嘗試調整窗口大小
3. 檢查是否有 K 線數據顯示
```

### Q2: OHLC 面板不更新？
```
可能原因：
1. 沒有新的交易發生
2. 程序可能暫停

解決方案：
1. 檢查控制面板，確保模擬正在運行
2. 嘗試移動鼠標觸發更新
```

### Q3: 十字光標不顯示？
```
可能原因：
1. 鼠標未移動到圖表區域

解決方案：
1. 確保鼠標在 K 線圖的繪圖區域內
2. 不要在邊距或標籤區域
```

### Q4: 顏色顯示異常？
```
可能原因：
1. 系統顯示設置問題

解決方案：
1. 檢查顯示器色彩設置
2. 嘗試切換主題（明亮/暗黑）
```

---

## 📚 進階使用

### 量尺功能
```
如何使用：
1. 在 K 線圖上點擊一次（左鍵）
2. 移動鼠標到另一個位置
3. 狀態欄會顯示兩點之間的：
   • 時間差（Δt）
   • 價格差（Δ價）
   • 漲跌幅（%）

取消量尺：
• 再次點擊左鍵，或
• 點擊右鍵
```

### 圖表縮放
```
縮放操作：
• 滑鼠滾輪向上：放大
• 滑鼠滾輪向下：縮小
• Ctrl+0：重置縮放

平移操作：
• 按住左鍵拖動圖表
```

### 切換週期
```
支持的週期：
• 10 秒
• 30 秒
• 1 分鐘
• 5 分鐘
• 10 分鐘
• 30 分鐘
• 60 分鐘

切換方法：
在工具欄或設置中選擇對應週期
```

---

## 🔧 自定義選項（未來版本）

### 計劃中的功能
1. **可調整的 OHLC 面板**
   - 拖動調整位置
   - 調整透明度
   - 隱藏/顯示

2. **配色方案選擇**
   - 經典紅綠配色
   - 暗色主題配色
   - 自定義配色

3. **更多信息顯示**
   - 成交量
   - 技術指標當前值
   - 百分位數據

---

## 📊 效能說明

### 性能影響
```
OHLC 面板更新：< 1ms
十字光標更新：< 1ms
總體性能影響：< 1%
```

### 優化措施
- 使用高效的數據查找算法
- 避免不必要的重繪
- 異步更新機制
- 異常捕獲保護

---

## 💡 小技巧

1. **快速查看歷史數據**
   ```
   在 K 線圖上快速移動鼠標，
   OHLC 面板會即時顯示每根 K 線的詳細數據
   ```

2. **對比兩根 K 線**
   ```
   使用量尺功能（點擊 + 移動），
   可以快速對比兩個時間點的價格差異
   ```

3. **關注關鍵價位**
   ```
   OHLC 面板會清楚顯示最高價和最低價，
   方便識別關鍵支撐和壓力位
   ```

4. **監控當前走勢**
   ```
   不移動鼠標時，面板顯示最新 K 線，
   可以實時監控當前價格走勢
   ```

---

## 📞 問題反饋

如果遇到任何問題或有改進建議，請：
1. 檢查 `TRADINGVIEW_STYLE_IMPROVEMENTS.md` 文檔
2. 查看 `OHLC_PANEL_DEMO.txt` 詳細說明
3. 提交問題報告

---

## 🎉 享受 TradingView 風格的 K 線圖！

現在您的 K 線圖已經具備了專業交易軟件的外觀和功能。
盡情使用這些新功能來分析市場數據吧！

